;
; Delayms.asm
;
; Created: 3/8/2019 7:58:08 AM
; Author : clayt
;


; This code is intended to create a 1.25ms delay subroutine while operating on a 16MHz frequency clock
; Using RCALL and an initial 1ms delay subroutine  the other times are accumulated. 

.ORG 0
RCALL DELAY_1250ms

END: RJMP END

DELAY_1250ms:	
	RCALL DELAY_1000ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
RET

DELAY_1000ms:
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
	RCALL DELAY_100ms
RET

DELAY_100ms:
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
	RCALL DELAY_10ms
RET


DELAY_10ms:
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
	RCALL DELAY_1ms
RET

DELAY_1ms:
	PUSH R16
	PUSH R18
	LDI R16, 172
	LDI R18, 6
	DELAY_1A:
		DELAY_1B:
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			DEC R16
			BRNE DELAY_1B
		DEC R18
		BRNE DELAY_1B
	POP R16
	POP R18
	RET
